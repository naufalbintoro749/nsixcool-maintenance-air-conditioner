<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Panel â€¢ NSixCool</title>
<style>
body{font-family:Inter,Arial;background:linear-gradient(180deg,#071024,#0f1724);color:#e6eef6;margin:0;padding:28px}
.container{max-width:900px;margin:0 auto}
.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px}
textarea{width:100%;height:180px;padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit}
.btn{padding:10px 14px;border-radius:8px;border:0;background:linear-gradient(90deg,#14b8a6,#06b6d4);color:#042022;font-weight:700}
.notice{color:#9aa4b8;font-size:13px}
.top{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
</style>
</head>
<body>
<div class="container">
  <div class="top">
    <h2>Admin Panel NSixCool</h2>
    <div>
      <button class="btn" onclick="logout()">Logout</button>
    </div>
  </div>

  <div class="card">
    <h3>Edit Daftar Layanan</h3>
    <p class="notice">Satu layanan per baris. Setelah klik Simpan, layanan akan diperbarui untuk website.</p>
    <textarea id="layananArea"></textarea>
    <div style="margin-top:12px">
      <button class="btn" onclick="save()">Simpan</button>
      <span id="msg" style="margin-left:12px;color:#9aa4b8"></span>
    </div>
  </div>

  <div style="height:12px"></div>
  <div class="card" style="margin-top:12px">
    <h3>Quick Info</h3>
    <p class="notice">Alamat: Perumahan Bumi Kartika Dramaga Raya Blok F2 No 11, Ciherang, Dramaga, Kab. Bogor</p>
    <p class="notice">Kontak teknisi: 0851-8331-7766</p>
  </div>
</div>

<script>
function requireAuth(){
  if(!localStorage.getItem('nsix_admin')){
    location.href = '/login.html';
  }
}
function logout(){
  localStorage.removeItem('nsix_admin');
  localStorage.removeItem('nsix_admin_pass');
  location.href = '/login.html';
}

async function load(){
  requireAuth();
  const res = await fetch('/api/layanan');
  const data = await res.json();
  document.getElementById('layananArea').value = (data.layanan || []).join('\n');
}
async function save(){
  const layananText = document.getElementById('layananArea').value;
  const pass = localStorage.getItem('nsix_admin_pass') || '';
  const res = await fetch('/api/layanan', {
    method:'POST',
    headers:{
      'Content-Type':'application/json',
      'x-admin-pass': pass
    },
    body: JSON.stringify({ layanan: layananText.split('\n').map(s=>s.trim()).filter(Boolean) })
  });
  const out = await res.json();
  if(out.success){
    document.getElementById('msg').innerText = 'Berhasil disimpan.';
  }else{
    document.getElementById('msg').innerText = out.message || 'Gagal menyimpan.';
  }
}

load();
</script>
</body>
</html>
